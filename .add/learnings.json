{
  "$schema": "https://github.com/MountainUnicorn/add/learnings.schema.json",
  "version": "1.0.0",
  "project": "ADD",
  "entries": [
    {
      "id": "L-001",
      "title": "GitHub Pages deployment uses Actions workflow serving website/ directory",
      "body": "GitHub Pages for this project uses Actions workflow at .github/workflows/pages.yml serving website/ directory — live at mountainunicorn.github.io/add/. Set build_type: workflow via gh api repos/{owner}/{repo}/pages -X POST -f build_type=workflow.",
      "scope": "project",
      "stack": [],
      "category": "technical",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-002",
      "title": "Local marketplace cache must be synced manually after changes",
      "body": "Rsync from source to ~/.claude/plugins/cache/add-marketplace/add/0.1.0/ with excludes for project-specific state (.add/, .git/, reports/, website/, specs/, tests/, etc.).",
      "scope": "project",
      "stack": [],
      "category": "technical",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-003",
      "title": "Claude Code enabledPlugins must be a record, not an array",
      "body": "Claude Code enabledPlugins in .claude/settings.json must be a record ({\"add\": true}) not an array ([\"add\"]). Array format causes 'Settings Error: Expected record, but received array' on startup and the entire settings file is skipped.",
      "scope": "workstation",
      "stack": [],
      "category": "anti-pattern",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-004",
      "title": "Chose ~/.claude/add/ directory over single file for cross-project persistence",
      "body": "Directory allows profile, library, and project index as separate concerns. Better than a single ~/.claude/add-profile.md file.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-005",
      "title": "Project learnings committed to git, cross-project knowledge is machine-local",
      "body": "Project-level learnings in .add/learnings.md are committed to git (device-portable). Cross-project knowledge in ~/.claude/add/ is machine-local (personal).",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-006",
      "title": "/add:init auto-detects existing projects for adoption mode",
      "body": "No explicit --adopt flag needed (though supported). Reduces friction for existing projects. Existing project rules and skills are preserved, not replaced.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-007",
      "title": "Dog-fooding across multiple projects catches issues quickly",
      "body": "Dog-fooding across dossierFYI and other projects caught the namespace issue quickly. The enterprise plugin's phased execution with audit informed the quality gate system.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-008",
      "title": "Environment promotion ladder with autoPromote per-env config",
      "body": "Agents autonomously climb local → dev → staging when verification passes at each level, with automatic rollback on failure. Production always requires human. autoPromote flag controls the ceiling. Ladder stops on first failure — no retries, log and move on. Two rollback strategies: revert-commit (dev) and redeploy-previous-tag (staging/production).",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-009",
      "title": "Chose 'cycle' over 'sprint' for work batching",
      "body": "Sprints imply fixed calendar time; cycles are scope-boxed and end when validation criteria are met. Better fit for AI-agent pace.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-010",
      "title": "Maturity levels as single master dial in config.json",
      "body": "Maturity levels (poc/alpha/beta/ga) as a single maturity.level field in config.json. Every rule checks it. Avoids having 14 separate toggles.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-011",
      "title": "Hill chart concept maps perfectly to ADD feature positions",
      "body": "Hill chart from Shape Up (uphill = figuring out, downhill = executing) maps perfectly to ADD: SHAPED → SPECCED → PLANNED → IN_PROGRESS → VERIFIED → DONE.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "low",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-012",
      "title": "Now/Next/Later framing for milestones avoids fake date precision",
      "body": "AI-agent work moves at unpredictable pace; fake dates create false precision. Now/Next/Later is more honest.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "low",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-013",
      "title": "Swarm coordination: worktrees for beta/ga, file reservations for alpha",
      "body": "Git worktrees for beta/ga (full isolation) and file reservations for alpha (lighter weight). 2-5 parallel agents is practical; beyond that coordination overhead exceeds benefit.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-014",
      "title": "WIP limits scale with maturity: poc=1, alpha=2, beta=4, ga=5",
      "body": "Prevents coordination overhead from swamping execution at each maturity level.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-015",
      "title": "Catch-up spike for non-greenfield adoption",
      "body": "Gap analysis against maturity requirements, generates cycle-0-catchup.md with remediation items for existing projects adopting ADD.",
      "scope": "project",
      "stack": [],
      "category": "architecture",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-016",
      "title": "Bare command names in plugin files cause namespace drift",
      "body": "Bare command names (/spec) in plugin files caused Claude to recommend /spec instead of /add:spec in consumer projects. Claude reads these files as instructions and reproduces the patterns it sees. Fix: namespace all references to /add:spec format.",
      "scope": "project",
      "stack": [],
      "category": "anti-pattern",
      "severity": "critical",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-017",
      "title": "Away mode needs explicit autonomous operations grant",
      "body": "Without explicit grant, agents fall back to 'ask the human' for routine commits/pushes during autonomous sessions. Fix: explicit 'autonomous operations' list (commit, push, create PRs) and 'boundaries' list (no production deploy, no merge to main).",
      "scope": "project",
      "stack": [],
      "category": "anti-pattern",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-018",
      "title": "Away mode should default to 2 hours, don't ask",
      "body": "Asking for duration when none provided is unnecessary friction when the human is trying to leave. Default to 2 hours.",
      "scope": "project",
      "stack": [],
      "category": "anti-pattern",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-019",
      "title": "Environment boundary is production, not staging",
      "body": "Saying 'agents must NOT deploy to staging' is too blunt for Tier 2/3 projects. The real boundary is production. Fix: promotion ladder with autoPromote per-env config, automatic rollback on verification failure.",
      "scope": "project",
      "stack": [],
      "category": "anti-pattern",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-020",
      "title": "v0.1.0 built in single session: 36 files, ~6,300 lines",
      "body": "Initial build completed in one session. All rules, commands, skills, and templates written. Non-greenfield adoption flow designed from analysis of 9 real projects. PRD written for the plugin itself (dog-fooding).",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "low",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "feature-complete"
    },
    {
      "id": "L-021",
      "title": "Maturity + chunking + swarm added in one session",
      "body": "Added maturity lifecycle rule, work hierarchy (Roadmap → Milestones → Cycles → Features → Tasks), /add:cycle command, swarm coordination protocol, milestone template. Promoted ADD from POC to Alpha.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "low",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "feature-complete"
    },
    {
      "id": "L-022",
      "title": "Dog-food trial on dossierFYI validated adoption mode",
      "body": "Plugin installed successfully. Hooks format was wrong (Claude Code expects {hooks: {EventType: [{matcher, hooks}]}}). Phase 0 Discovery worked end-to-end. Maturity detection assessed Alpha→Beta (5/5 alpha, 4.5/5 beta). Catch-up spike identified 5 items. No conflicts with existing rules/skills.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "post-verify"
    },
    {
      "id": "L-023",
      "title": "10 autoloaded rules cost ~14K tokens (7% of 200K context)",
      "body": "CLAUDE.md is fine (~800 tokens). Heavy rules: agent-coordination (~3K), maturity-lifecycle (~2K). Consider conditional autoload based on maturity, progressive disclosure, or YAML paths filtering. For now 14K is acceptable.",
      "scope": "project",
      "stack": [],
      "category": "performance",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-07",
      "classified_by": "agent",
      "checkpoint_type": "post-verify"
    },
    {
      "id": "L-024",
      "title": "Version bump checklist: 8 locations must be updated together",
      "body": "plugin.json, marketplace.json, config.json, README.md, all commands, all skills, reports HTML, website footers. Heading conventions: Commands '# ADD {Name} Command v{X}', Skills '# ADD {Name} Skill v{X}', Rules '# ADD Rule: {Name}' (no version). Historical references to past versions should NOT be bumped.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-14",
      "classified_by": "agent",
      "checkpoint_type": "post-verify"
    },
    {
      "id": "L-025",
      "title": "First retro: spec-before-code promoted to Tier 1",
      "body": "5/5 specs marked Complete (4 were Draft despite implementations — spec-after-code violation). Dog-food the methodology or lose credibility. Feedback filtering posture: accept gems from criticism, maintain independent view.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-17",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    },
    {
      "id": "L-026",
      "title": "Namespace fix: 205 bare references across 30 files",
      "body": "Created README.md, SVG infographic, HTML overview report. Website built with raspberry palette. Critical: namespaced all 205 bare command references. Plugin files are Claude's instructions — whatever pattern is in the files, Claude reproduces it.",
      "scope": "project",
      "stack": [],
      "category": "technical",
      "severity": "high",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "feature-complete"
    },
    {
      "id": "L-027",
      "title": "First away session: 4 tasks completed in ~10 minutes",
      "body": "45-minute window, all 4 tasks done in ~10 min. Parallel subagents for HTML report + SVG infographic. SVG expanded 1800→2100px for promotion ladder. Away log + archive pattern works well.",
      "scope": "project",
      "stack": [],
      "category": "process",
      "severity": "low",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "post-away"
    },
    {
      "id": "L-028",
      "title": "GitHub README strips CSS/JS — SVG is only rich visual option",
      "body": "GitHub README renders SVG inline but strips all CSS/JS. The SVG infographic is the only way to get rich visuals in a README. GitHub Pages is the solution for the full website experience.",
      "scope": "workstation",
      "stack": [],
      "category": "technical",
      "severity": "medium",
      "source": "ADD",
      "date": "2026-02-08",
      "classified_by": "agent",
      "checkpoint_type": "retro"
    }
  ]
}
